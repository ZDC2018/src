var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);a.prototype=t.prototype,e.prototype=new a},__awaiter=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,o){function r(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function a(e){return function(t){return i([e,t])}}function i(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(r=o[2&a[0]?"return":a[0]?"throw":"next"])&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[0,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){l.label=a[1];break}if(6===a[0]&&l.label<r[1]){l.label=r[1],r=a;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(a);break}r[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(i){a=[6,i],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var n,o,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseElement=function(){function e(){this.type=""}return e}();__reflect(BaseElement.prototype,"BaseElement");var GameLogic=function(){function e(e){this._gameStage=e,this.init()}return e.prototype.init=function(){GameData.initData(),console.log(GameData.curretLevel);var e=RES.getRes("l"+GameData.curretLevel+"_json");MapDataParse.createMapData(e.map),LevelGameDataParse.parseLevelGameData(e),ElementTypeParse.creatElementTypeData(e.element),this.mapc=new MapControl,this.mapc.createElementAllMap();var t=new GameBackGround;this._gameStage.addChild(t),t.changeBackground();var a=new egret.Sprite;this._gameStage.addChild(a),this.levm=new LevelReqViewManage(a);var i=new egret.Sprite;this._gameStage.addChild(i),this.pvm=new PropViewManage(i);var n=new egret.Sprite;this._gameStage.addChild(n),this.evm=new ElementViewManage(n),1==GameData.curretLevel?this.evm.showElement():(this.evm.addLastLevelElements(),this.evm.timerToBox2()),this.evm.addEventListener(ElementViewManageEvent.LEVEL_EXP_UP,this.nextLevelTest,this)},e.prototype.nextLevelTest=function(e){console.log("levelup监听事件成功"),GameData.curretLevel++,GameData.curretLevel>=4?this.isGameOver():(this.clear(),GameData.oldElements=[].concat(GameData.elements),this.init(),console.log("到下一关"))},e.prototype.clear=function(){for(GameData.availableMapId=[];this._gameStage.numChildren;)this._gameStage.removeChildAt(0)},e.prototype.removeAndOver=function(e){},e.prototype.createNewElement=function(e){console.log("刷新地图数据！！！！！！！！"),this.mapc.updateMapLocation(),this.evm.updateMapData()},e.prototype.checkOtherElementLink=function(e){console.log("所有动画逻辑结束"),this.isGameOver()},e.prototype.isGameOver=function(){console.log("通关"),this.gameoverpanel||(this.gameoverpanel=new GameOverPanel,this._gameStage.addChild(this.gameoverpanel),this.gameoverpanel.show(!0))},e}();__reflect(GameLogic.prototype,"GameLogic");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("game")},t.prototype.onResourceLoadComplete=function(e){"game"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"game"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.createGameScene=function(){var e=new egret.Sprite;this.addChild(e),this._gl=new GameLogic(e)},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ElementTypeParse=function(){function e(){}return e.creatElementTypeData=function(e){GameData.elementTypes=e},e}();__reflect(ElementTypeParse.prototype,"ElementTypeParse");var GameBackGround=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.changeBackground=function(){this.cacheAsBitmap=!1,this.removeChildren(),this.createBackGroundImage(),this.createMapBg(),this.createPlayerLevelBg(),this.createCoinBg(),this.createCoinOutputBg(),this.createShareBg(),this.cacheAsBitmap=!0},t.prototype.createBackGroundImage=function(){this.bgImage||(this.bgImage=new egret.Bitmap),this.bgImage.texture=RES.getRes(GameData.levelBackgroundImageName),this.bgImage.width=GameData.stageW,this.bgImage.height=GameData.stageH,this.addChild(this.bgImage),console.log(GameData.levelFrontBackgroundImageName);var e=new egret.Bitmap;e.texture=RES.getRes(GameData.levelFrontBackgroundImageName),e.width=GameData.stageW,e.height=.37*GameData.stageH,e.y=GameData.stageH-e.height,this.addChild(e)},t.prototype.addMapBg=function(e){var t,a=(GameData.stageW-40)/GameData.MaxRow;console.log(a);var i=GameData.stageH-(GameData.stageW-30)/6-60-a*GameData.MaxRow,n=e.length;GameData.unmapnum=n;for(var o=0,r=0;n>r;r++){o=e[r];var s=Math.floor(o/GameData.MaxColumn),l=o%GameData.MaxColumn;t=new egret.Bitmap,t.width=a,t.height=a,t.x=20+a*l,t.y=i+a*s,t.texture=RES.getRes("scene_01_base_small_png"),this.addChild(t),GameData.mapData[s][l]=-2}},t.prototype.createMapBg=function(){console.log("createMapBg");var e=(GameData.stageW-40)/GameData.MaxRow,t=3*e/2,a=new egret.Bitmap;a.texture=RES.getRes("ui_blackbase_png"),a.width=GameData.stageW-40,a.height=e*GameData.MaxRow,a.x=20,a.y=t,this.addChild(a),console.log("addMapGird");for(var i,n=0;n<GameData.MaxRow;n++)for(var o=0;o<GameData.MaxColumn;o++)GameData.girdBg.length<=n*GameData.MaxRow+o?(i=new egret.Bitmap,GameData.girdBg.push(i)):i=GameData.girdBg[n*GameData.MaxRow+o],i.width=e,i.height=.6*e,i.x=20+e/5+(e+e/5)*o,i.y=t+20+e*n,-1!=GameData.mapData[n][o]?i.texture=RES.getRes("scene_01_base_small_png"):i.texture=RES.getRes("scene_01_base_small_lock_png"),this.addChild(i)},t.prototype.createPlayerLevelBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_level_png"),t.width=.44*e,t.height=.53*e,t.x=20,t.y=30;var a=new egret.Bitmap;a.texture=RES.getRes("ui_base_count_png"),a.width=3*e,a.height=e/3,a.x=10+t.width,a.y=40,this.addChild(a)},t.prototype.createCoinBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_money_total_png"),t.width=e/3,t.height=e/3,t.x=20,t.y=e-10,this.addChild(t);var a=new egret.Bitmap;a.texture=RES.getRes("ui_base_count_png"),a.width=1.5*e,a.height=e/3,a.x=20+e/3,a.y=t.y,this.addChild(a)},t.prototype.createCoinOutputBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_money_sec_png"),t.width=e/3+5,t.height=e/3,t.x=25+e/3+1.5*e,t.y=e-10,this.addChild(t);var a=new egret.Bitmap;a.texture=RES.getRes("ui_base_count_png"),a.width=1.5*e,a.height=e/3,a.x=30+1.5*e+2*e/3,a.y=t.y,this.addChild(a)},t.prototype.createShareBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_share_01_png"),t.width=1.05*e,t.height=.46*e,t.x=GameData.stageW-1.3*e,t.y=.875*e,this.addChild(t)},t}(egret.Sprite);__reflect(GameBackGround.prototype,"GameBackGround");var GameData=function(){function e(){}return e.initData=function(){e.mapData=new Array;for(var t=0;t<e.MaxRow;t++){var a=new Array;e.mapData.push(a);for(var i=0;i<e.MaxColumn;i++)e.mapData[t].push(-1)}e.levelExp=0,e.levelReq=new LevelRequire,e.availableMapId=new Array,e.elements=new Array,e.unusedElements=new Array;for(var n,o=e.MaxRow*e.MaxColumn,t=0;o>t;t++)n=new GameElement,n.id=t,e.elements.push(n),e.unusedElements.push(t);e.stageW=egret.MainContext.instance.stage.stageWidth,e.stageH=egret.MainContext.instance.stage.stageHeight,console.log("舞台宽度"+e.stageW),console.log("舞台高度"+e.stageH)},e.unmapnum=0,e.levelStepNum=0,e.levelBackgroundImageName="",e.levelFrontBackgroundImageName="",e.MaxRow=5,e.MaxColumn=4,e.currentElementNum=0,e.girdBg=new Array,e.coin=0,e.oldElements=new Array,e.curretLevel=1,e.levelExp=0,e.levelReqExp=0,e.levelCoin=0,e.stageW=0,e.stageH=0,e}();__reflect(GameData.prototype,"GameData");var LevelGameDataParse=function(){function e(){}return e.parseLevelGameData=function(t){GameData.elementTypes=t.element,GameData.levelBackgroundImageName=t.levelbgimg,GameData.levelFrontBackgroundImageName=t.levelfrontbgimg,GameData.levelReqExp=t.levelreqexp,GameData.levelCoin=t.levelcoin,e.parseLevelReq(t.levelreq)},e.parseLevelReq=function(e){GameData.levelReq.openChange();for(var t=e.length,a=0;t>a;a++)GameData.levelReq.addElements(e[a].type,e[a].num)},e}();__reflect(LevelGameDataParse.prototype,"LevelGameDataParse");var LevelRequire=function(){function e(){this.reqElements=new Array}return e.prototype.getLevelReqNum=function(){return this.reqElements.length},e.prototype.addElements=function(e,t){var a=new LevelRequireElement;a.num=t,a.type=e,this.reqElements.push(a)},e.prototype.openChange=function(){this.reqElements=[]},e.prototype.changeReqNum=function(e,t){for(var a=this.getLevelReqNum(),i=0;a>i;i++)if(this.reqElements[i].type==e)return this.reqElements[i].num-=t,void console.log("最新数量",this.reqElements[i].num)},e.prototype.isClear=function(){return GameData.levelExp>=GameData.levelReqExp?!0:void 0},e}();__reflect(LevelRequire.prototype,"LevelRequire");var MapControl=function(){function e(){}return e.prototype.createElementAllMap=function(){this.createAllMap2()},e.prototype.createAllMap2=function(){for(var e=(GameData.MaxColumn*GameData.MaxRow,0),t=RES.getRes("l"+GameData.curretLevel+"_json"),a=t.addmap,i=0;i<GameData.MaxRow;i++)for(var n=0;n<GameData.MaxColumn;n++)-1!=GameData.mapData[i][n]?(0!=GameData.oldElements.length?(console.log("创建空地图old"+GameData.oldElements.length),e=GameData.oldElements[0].id,GameData.elements[e].type=GameData.oldElements[0].type,0!=GameData.oldElements[0].location?(GameData.elements[e].location=GameData.oldElements[0].location,GameData.elements[e].grade=GameData.oldElements[0].grade):(GameData.elements[e].location=a[0],a.shift()),GameData.oldElements.shift()):(e=GameData.unusedElements[0],GameData.elements[e].location=i*GameData.MaxColumn+n,GameData.unusedElements.shift()),GameData.mapData[i][n]=-2,"b0"!=GameData.elements[e].type&&0==GameData.elements[e].grade&&GameData.availableMapId.push(e),console.log("创建空地图availableMapId:"+GameData.availableMapId)):GameData.mapData[i][n]=-1},e.prototype.createType=function(){return GameData.elementTypes[Math.floor(Math.random()*GameData.elementTypes.length)].toString()},e.prototype.changeTypeByID=function(e){GameData.elements[e].type=this.createType()},e.prototype.updateMapLocation=function(){},e}();__reflect(MapControl.prototype,"MapControl");var MapDataParse=function(){function e(){}return e.createMapData=function(e){var t=e.length;GameData.unmapnum=t;for(var a=0,i=0;t>i;i++){a=e[i];var n=Math.floor(a/GameData.MaxColumn),o=a%GameData.MaxColumn;GameData.mapData[n][o]=-2}console.log("地图数据解析："+GameData.mapData),GameData.currentElementNum=GameData.MaxColumn*GameData.MaxRow-t},e}();__reflect(MapDataParse.prototype,"MapDataParse");var PropLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.useProp=function(e){switch(e){case 0:this.rank();break;case 1:this.voice();break;case 2:this.box();break;case 3:this.shop();break;case 4:this.recycle()}},t.prototype.rank=function(){console.log("rank")},t.prototype.voice=function(){console.log("voice")},t.prototype.box=function(){console.log("box_in");var e=new egret.Sprite,t=new ElementViewManage(e);console.log(t.countdown),console.log(t.countdown--)},t.prototype.shop=function(){console.log("shop")},t.prototype.recycle=function(){console.log("recycle")},t}(egret.Sprite);__reflect(PropLogic.prototype,"PropLogic");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var GameElement=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t.location=0,t.grade=0,t}return __extends(t,e),t}(BaseElement);__reflect(GameElement.prototype,"GameElement");var LevelRequireElement=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t}return __extends(t,e),t}(BaseElement);__reflect(LevelRequireElement.prototype,"LevelRequireElement");var ElementViewManageEvent=function(e){function t(t,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var n=e.call(this,t,a,i)||this;return n.ele1=0,n.ele2=0,n}return __extends(t,e),t.TAP_TWO_ELEMENT="tap_two_element",t.REMOVE_ANIMATION_OVER="remove_animation_over",t.UPDATE_MAP="update_map",t.UPDATE_VIEW_OVER="update_view_over",t.LEVEL_EXP_UP="level_exp_up",t.DELETE_ELEMENT_OVER="delete_element_over",t.USE_PROP_CLICK="use_prop_click",t}(egret.Event);__reflect(ElementViewManageEvent.prototype,"ElementViewManageEvent");var ResourceUtils=function(){function e(){}return e.createBitmapByName=function(e){var t=new egret.Bitmap,a=RES.getRes(e);return t.texture=a,t},e.createBitmapFromSheet=function(e,t){void 0===t&&(t="gameRes");var a=RES.getRes(t),i=a.getTexture(e),n=new egret.Bitmap;return n.texture=i,n},e.getTextureFromSheet=function(e,t){void 0===t&&(t="gameRes");var a=RES.getRes(t),i=a.getTexture(e);return i},e}();__reflect(ResourceUtils.prototype,"ResourceUtils");var SpecialNumber=function(e){function t(t){var a=e.call(this)||this;return a.charName=t,a}return __extends(t,e),t.prototype.setValue=function(e){if(this.removeChildren(),""!=e&&null!=e)for(var t=(e+"").split(""),a=t.length,i=0,n=0;a>n;n++){var o=t[n];","==o&&(o="dot"),"/"==o&&(o="gang");var r;r="gang"==o?ResourceUtils.createBitmapFromSheet(this.charName+o,"sorceNum"):"dot"==o?ResourceUtils.createBitmapFromSheet(this.charName+o,"sorceNum"):ResourceUtils.createBitmapFromSheet(this.charName+o,"sorceNum"),r&&(r.x=i,i+=r.width,this.addChild(r))}},t}(egret.Sprite);__reflect(SpecialNumber.prototype,"SpecialNumber");var ElementView=function(e){function t(t){var a=e.call(this)||this;return a.location=0,a.grade=0,a._id=-1,a._focus=!1,a.speed=700,a.thisParent=t,a.init(),a}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.touchEnabled=!0,this.touchChildren=!1,this.bitmap=new egret.Bitmap;var e=(GameData.stageW-40)/GameData.MaxColumn*.8;this.bitmap.width=e-10,this.bitmap.height=e-10,this.bitmap.x=-1*e/2,this.bitmap.y=-1*e/2,this.addChild(this.bitmap)},t.prototype.setTexture=function(e){this.bitmap.texture=RES.getRes(e)},Object.defineProperty(t.prototype,"focus",{get:function(){return this._focus},enumerable:!0,configurable:!0}),t.prototype.setFocus=function(e){e!=this.focus&&(this._focus=e,e?this.setTexture("e"+GameData.elements[this.id].grade+"focus_png"):this.setTexture("e"+GameData.elements[this.id].grade+"_png"))},t.prototype.openBox=function(){GameData.elements[this.id].type="0",GameData.elements[this.id].grade=1,this.setTexture("e"+GameData.elements[this.id].grade+"_png")},t.prototype.move=function(){var e=egret.Tween.get(this);e.to({x:this.targetX(),y:this.targetY()},this.speed,egret.Ease.cubicInOut)},t.prototype.show=function(e){var t=egret.Tween.get(this);t.wait(e,!1),t.call(this.addThisToParent,this),t.to({x:this.targetX(),y:this.targetY()},this.speed,egret.Ease.bounceOut)},t.prototype.addThisToParent=function(){this.parent||this.thisParent.addChild(this)},t.prototype.targetX=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=20+e/5+(e+e/5)*(this.location%GameData.MaxColumn)+e/2+5;return t},t.prototype.targetY=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=3*e/2,a=t+e*Math.floor(this.location/GameData.MaxColumn)+e/2-15;return a},t.prototype.moveAndBack=function(e,t){void 0===t&&(t=!1);var a=(GameData.stageW-40)/GameData.MaxRow,i=20+a*(e%GameData.MaxColumn)+a/2+5,n=3*a/2,o=n+a*Math.floor(this.location/GameData.MaxColumn)+a/2-15,r=egret.Tween.get(this);t?r.to({x:i,y:o,scaleX:1.2,scaleY:1.2},300,egret.Ease.cubicOut).call(this.back,this):r.to({x:i,y:o,scaleX:.8,scaleY:.8},300,egret.Ease.cubicOut).call(this.back,this)},t.prototype.back=function(){var e=egret.Tween.get(this);e.to({x:this.targetX(),y:this.targetY(),scaleX:1,scaleY:1},300,egret.Ease.cubicOut)},t.prototype.moveAndScale=function(e,t){void 0===t&&(t=!1);var a=(GameData.stageW-40)/GameData.MaxColumn,i=20+a*(e%GameData.MaxColumn)+a/2+5,n=3*a/2,o=n+a*Math.floor(this.location/GameData.MaxColumn)+a/2-15,r=egret.Tween.get(this);t?r.to({x:i,y:o,scaleX:1.4,scaleY:1.4},300,egret.Ease.cubicInOut).call(this.backScaleNoCall,this):r.to({x:i,y:o,scaleX:.6,scaleY:.6},300,egret.Ease.cubicInOut).call(this.backScale,this)},t.prototype.backScale=function(){var e=egret.Tween.get(this);e.to({scaleX:1,scaleY:1},300,egret.Ease.backOut).call(this.canRemove,this)},t.prototype.backScaleNoCall=function(){var e=egret.Tween.get(this);e.to({scaleX:1,scaleY:1},300,egret.Ease.backOut)},t.prototype.canRemove=function(){var e=new ElementViewManageEvent(ElementViewManageEvent.REMOVE_ANIMATION_OVER);this.evm.dispatchEvent(e)},t.prototype.playRemoveAni=function(){var e=egret.Tween.get(this);e.to({scaleX:1.4,scaleY:1.4},300,egret.Ease.cubicInOut).to({scaleX:1,scaleY:1},300,egret.Ease.cubicInOut).call(this.removeAniCall,this)},t.prototype.removeAniCall=function(){this.parent&&this.parent.removeChild(this);var e=new ElementViewManageEvent(ElementViewManageEvent.DELETE_ELEMENT_OVER);this.evm.delOver(e)},t.prototype.playCurveMove=function(e,t){var a=egret.Tween.get(this);a.to({x:e,y:t},700,egret.Ease.quadOut).call(this.overCurveMove,this)},t.prototype.overCurveMove=function(){this.parent&&this.parent.removeChild(this);var e=new ElementViewManageEvent(ElementViewManageEvent.UPDATE_MAP);this.evm.updateMap(e)},t.prototype.moveNewLocation=function(){if(!this.parent){var e=(GameData.stageW-40)/GameData.MaxColumn,t=3*e/2;this.y=t-this.width,this.scaleX=1,this.scaleY=1,this.x=this.targetX(),this.thisParent.addChild(this)}egret.Tween.get(this).to({x:this.targetX(),y:this.targetY()},this.speed,egret.Ease.bounceOut).call(this.moveNewLocationOver,this)},t.prototype.moveNewLocationOver=function(){var e=new ElementViewManageEvent(ElementViewManageEvent.UPDATE_VIEW_OVER);this.evm.moveNewLocationOver(e)},t}(egret.Sprite);__reflect(ElementView.prototype,"ElementView");var ElementViewManage=function(e){function t(t){var a=e.call(this)||this;return a._touchStatus=!1,a._distance=new egret.Point,a._levelExpLabel=new egret.TextField,a._coinLabel=new egret.TextField,a._coinSecLabel=new egret.TextField,a._numText=new egret.TextField,a._currentLevelNumText=new egret.TextField,a._expBar=new egret.Bitmap,a.ev=new ElementView(a._layer),a._currentTapID=-1,a._countdown=10,a.timer=new egret.Timer(1e3,0),a.coinTimer=new egret.Timer(1e3,0),a.moveEleNum=0,a._isDeleteOver=!0,a.moveLocElementNum=0,a._layer=t,a.init(),a.createTimerBg(),a.createExpBar(),a.levelExpLabel(),a.createNumText(),a}return __extends(t,e),t.prototype.init=function(){console.log("evm初始化"),this.elementViews=new Array;for(var e,t=GameData.MaxColumn*GameData.MaxRow,a=0;t>a;a++)e=new ElementView(this._layer),e.id=a,e.location=GameData.elements[a].location,this.elementViews.push(e),e.evm=this,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this);var i=new PropView(2);i.id=2,this._layer.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tapTimerCountDown,this)},t.prototype.createTimerBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_time_base_png"),t.width=e/3,t.height=e/3,t.x=GameData.stageW/2-1.575*e/2+t.width/2,t.y=GameData.stageH-1.575*e+t.width/2,this._layer.addChild(t)},t.prototype.levelExpLabel=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_level_png"),t.width=.44*e,t.height=.53*e,t.x=e/6,t.y=e/4,this._layer.addChild(t),this._levelExpLabel.text="0/"+GameData.levelReqExp,this._levelExpLabel.width=3*e,this._levelExpLabel.x=1.7*e,this._levelExpLabel.y=.375*e,this._layer.addChild(this._levelExpLabel),this._coinLabel.text=GameData.coin.toString(),this._coinLabel.width=3*e,this._coinLabel.x=10+e/3+1.5*e/2-5,this._coinLabel.y=e-5,this._layer.addChild(this._coinLabel),this._coinSecLabel.text="0",this._coinSecLabel.width=3*e,this._coinSecLabel.x=25+e/3+1.5*e+e/3+5+1.5*e/2-5,this._coinSecLabel.y=e-5,this._layer.addChild(this._coinSecLabel)},t.prototype.createNumText=function(){var e=(GameData.stageW-40)/GameData.MaxRow;this._numText.x=GameData.stageW/2-1.575*e/2+e/6+10,this._numText.y=GameData.stageH-1.575*e+e/6+5,this._numText.text="10",this._numText.textColor=14165019,this._numText.bold=!0,this._layer.addChild(this._numText),this._currentLevelNumText.x=28,this._currentLevelNumText.y=48,this._currentLevelNumText.text="Lv"+GameData.curretLevel.toString(),this._currentLevelNumText.textColor=1871021,this._currentLevelNumText.size=15,this._layer.addChild(this._currentLevelNumText)},t.prototype.createExpBar=function(){var e=(GameData.stageW-40)/GameData.MaxRow;this._expBar.width=3*e,this._expBar.height=e/3-8,this._expBar.x=.44*e+10+2,this._expBar.y=44,this._expBar.scaleX=GameData.levelExp/GameData.levelReqExp,this._expBar.texture=RES.getRes("ui_experience_png"),this._layer.addChild(this._expBar)},t.prototype.mouseDown=function(e){this.ev=e.currentTarget,this._touchStatus=!0,this._distance.x=e.stageX-this.ev.x,this._distance.y=e.stageY-this.ev.y,0==this.ev.grade&&(this.ev.openBox(),this.ev.grade=1,this.showElementById(this.ev.id)),this._layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.mouseUp=function(e){this._touchStatus=!1,this._layer.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this);var t=(GameData.stageW-40)/GameData.MaxRow,a=3*t/2,i=Math.floor((e.stageY-a)/t),n=Math.floor((e.stageX-44)/(t+24));if((e.stageY<a||i>=GameData.MaxRow||n>=GameData.MaxColumn||0>i||0>n)&&this.ev.back(),-1!=GameData.mapData[i][n]&&-2!=GameData.mapData[i][n]){console.log(GameData.mapData[i][n]);var o=this.ev,r=this.elementViews[GameData.mapData[i][n]];this.ev.id!=r.id?this.elementHitTest(o,r):this.ev.back()}else this.ev.back()},t.prototype.mouseMove=function(e){this._touchStatus&&(this.ev.x=e.stageX-this._distance.x,this.ev.y=e.stageY-this._distance.y)},t.prototype.elementHitTest=function(e,t){var a=e.hitTestPoint(t.targetX(),t.targetY());if(console.log(a),a)if(GameData.elements[e.id].grade==GameData.elements[t.id].grade&&GameData.elements[t.id].grade<=9){console.log("消除动画"),"b0"!==GameData.elements[e.id].type&&(this._isDeleteOver=!1,this.playRemoveAni(e.id));var i=Math.floor(GameData.elements[e.id].location/GameData.MaxColumn),n=GameData.elements[e.id].location%GameData.MaxColumn;GameData.elements[e.id].grade=0,GameData.elements[t.id].grade=GameData.elements[t.id].grade+1,this.elementViews[e.id].grade=0,this.elementViews[t.id].grade+=1,this.addLevelExp(GameData.elements[t.id].grade),this._levelExpLabel.text=this._levelExpLabel.text=GameData.levelExp.toString()+"/"+GameData.levelReqExp.toString(),this._expBar.scaleX=GameData.levelExp/GameData.levelReqExp,this.showElementById(t.id),0==GameData.availableMapId.length?(this.timer.start(),console.log(GameData.availableMapId.length),GameData.mapData[i][n]=-2,GameData.availableMapId.push(e.id)):(GameData.mapData[i][n]=-2,GameData.availableMapId.push(e.id));var o=new ElementViewManageEvent(ElementViewManageEvent.LEVEL_EXP_UP);this.levelExpUp(o)}else this.changeLocationWithScaleOrBack(e.id,t.id,!0);else this.ev.back()},t.prototype.addLastLevelElements=function(){for(var e,t=(GameData.stageW-40)/GameData.MaxRow,a=3*t/2,i=GameData.MaxRow*GameData.MaxColumn,n=0;i>n;n++)if(e=this.elementViews[n],e.grade=GameData.elements[n].grade,e.location=GameData.elements[n].location,e.x=e.targetX(),e.y=a-e.width,0!=e.grade){var o=Math.floor(e.location/GameData.MaxColumn),r=e.location%GameData.MaxColumn;GameData.mapData[o][r]=e.id,e.setTexture("e"+e.grade+"_png"),e.show(50*GameData.MaxColumn*GameData.MaxRow-50*GameData.unmapnum-50*(5*GameData.MaxRow+5))}else if(0==e.grade&&"b0"==GameData.elements[n].type){console.log("添加纸箱id: "+e.id);var o=Math.floor(e.location/GameData.MaxColumn),r=e.location%GameData.MaxColumn;GameData.mapData[o][r]=e.id,e.setTexture("ui_box_general_png"),e.show(50*GameData.MaxColumn*GameData.MaxRow-50*GameData.unmapnum-50*(5*GameData.MaxRow+5))}},t.prototype.showElement=function(){var e,t=(GameData.stageW-40)/GameData.MaxRow,a=3*t/2,i=Math.floor(Math.random()*GameData.availableMapId.length),n=GameData.availableMapId[i],o=Math.floor(GameData.elements[n].location/GameData.MaxColumn),r=GameData.elements[n].location%GameData.MaxColumn;-1!=GameData.mapData[o][r]&&(GameData.mapData[o][r]=n,e=this.elementViews[GameData.mapData[o][r]],e.setTexture("ui_box_general_png"),e.x=e.targetX(),e.y=a-e.width,e.show(50*GameData.MaxColumn*GameData.MaxRow-50*GameData.unmapnum-50*(5*GameData.MaxRow+5)),GameData.availableMapId.splice(i,1),this.timerToBox2())},t.prototype.showRandomElement=function(){console.log("随机掉落开始");for(var e,t=(GameData.stageW-40)/GameData.MaxRow,a=3*t/2,i=0;i<GameData.availableMapId.length;i++){var n=GameData.availableMapId[i],o=Math.floor(GameData.elements[n].location/GameData.MaxColumn),r=GameData.elements[n].location%GameData.MaxColumn;-2!=GameData.mapData[o][r]&&GameData.availableMapId.splice(i,1)}if(0==GameData.availableMapId.length)this.timer.stop();else{var i=Math.floor(Math.random()*GameData.availableMapId.length),n=GameData.availableMapId[i],o=Math.floor(GameData.elements[n].location/GameData.MaxColumn),r=GameData.elements[n].location%GameData.MaxColumn;GameData.mapData[o][r]=n,e=this.elementViews[GameData.mapData[o][r]],e.location=GameData.elements[n].location,GameData.elements[n].type="b0",e.setTexture("ui_box_general_png"),e.x=e.targetX(),e.y=a-e.width,e.grade=0,e.show(50*GameData.MaxColumn*GameData.MaxRow-50*GameData.unmapnum-50*(5*GameData.MaxRow+5)),GameData.availableMapId.splice(i,1)}},t.prototype.showElementById=function(e){var t,a=(GameData.stageW-40)/GameData.MaxRow,i=3*a/2,n=Math.floor(GameData.elements[e].location/GameData.MaxColumn),o=GameData.elements[e].location%GameData.MaxColumn;-1!=GameData.mapData[n][o]&&(t=this.elementViews[e],"b0"==GameData.elements[e].type?t.setTexture("ui_box_general_png"):t.setTexture("e"+GameData.elements[e].grade+"_png"),t.x=t.targetX(),t.y=i-t.width,t.show(50*GameData.MaxColumn*GameData.MaxRow-50*GameData.unmapnum-50*(5*GameData.MaxRow+5)))},t.prototype.timerToBox2=function(){this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeFuc,this),this.coinTimer.addEventListener(egret.TimerEvent.TIMER,this.addCoin,this),this.timer.start(),this.coinTimer.start()},t.prototype.timeFuc=function(){this._countdown--?this._countdown<0:this._countdown=0,this._numText.text=this._countdown.toString(),0==this._countdown&&this._isDeleteOver&&(this.showRandomElement(),this._countdown=10)},Object.defineProperty(t.prototype,"countdown",{get:function(){return this._countdown},set:function(e){this._countdown=e},enumerable:!0,configurable:!0}),t.prototype.tapTimerCountDown=function(e){var t=e.currentTarget;2==t.id&&(this._countdown>0?this._countdown--:this._countdown=10)},t.prototype.addCoin=function(){var e=this.addSecCoin();GameData.coin+=e;var t=Math.ceil(GameData.coin).toString(),a="",i=t.length;a=i>=4&&6>=i?t.slice(0,2)+"."+t.slice(3,5)+"K":i>=7&&9>=i?t.slice(0,2)+"."+t.slice(3,5)+"M":i>=10&&12>=i?t.slice(0,2)+"."+t.slice(3,5)+"B":i>=13&&15>=i?t.slice(0,2)+"."+t.slice(3,5)+"T":GameData.coin.toString(),this._coinLabel.text=a,this._coinSecLabel.text=e.toString()},t.prototype.addSecCoin=function(){var e=0,t=new Array;t=[0,.5,1,2,4,8,16,32,64];for(var a=0;a<GameData.elements.length;a++)0!=GameData.elements[a].grade&&(e+=GameData.elements[a].grade*t[GameData.elements[a].grade]);return console.log("每秒增加金币："+e),e},t.prototype.changeLocationWithScaleOrBack=function(e,t,a){void 0===a&&(a=!1);var i=e,n=t;this.elementViews[t].focus&&(i=t,n=e),this._layer.getChildIndex(this.elementViews[i])<this._layer.getChildIndex(this.elementViews[n])&&this._layer.swapChildren(this.elementViews[i],this.elementViews[n]),a?(this.elementViews[i].moveAndBack(this.elementViews[n].location,!0),this.elementViews[n].moveAndBack(this.elementViews[i].location)):(this.elementViews[i].moveAndScale(this.elementViews[n].location,!0),this.elementViews[n].moveAndScale(this.elementViews[i].location)),this._currentTapID=-1},t.prototype.playReqRemoveAn=function(e,t,a){this.moveEleNum++;var i=this.elementViews[e];i.parent&&this._layer.setChildIndex(i,this._layer.numChildren),i.playCurveMove(t,a)},t.prototype.playRemoveAni=function(e){var t=this.elementViews[e];t.parent&&this._layer.setChildIndex(t,this._layer.numChildren),t.playRemoveAni()},t.prototype.delOver=function(e){e&&(console.log("删除完毕"),this._isDeleteOver=!0)},t.prototype.updateMap=function(e){this.moveEleNum--,0==this.moveEleNum&&this.dispatchEvent(e)},t.prototype.addLevelExp=function(e){var t=0;switch(e){case 2:t=1;break;case 3:t=2;break;case 4:t=3;break;case 5:t=4;break;case 6:t=5;break;case 7:t=6;break;case 8:t=7;break;case 9:t=8}GameData.levelExp+=t},t.prototype.levelExpUp=function(e){GameData.levelExp>=GameData.levelReqExp&&(console.log("levelExpup函数"+GameData.levelExp),this.timer.stop(),this.coinTimer.stop(),this.dispatchEvent(e))},t.prototype.updateMapData=function(){console.log("重新布局");for(var e=this.elementViews.length,t=0;e>t;t++)this.elementViews[t].location=GameData.elements[t].location,this.elementViews[t].setTexture("e"+GameData.elements[t].type+"_png"),this.elementViews[t].moveNewLocation()
},t.prototype.moveNewLocationOver=function(e){if(this.moveLocElementNum++,this.moveLocElementNum==GameData.MaxColumn*GameData.MaxRow){var t=new ElementViewManageEvent(ElementViewManageEvent.UPDATE_VIEW_OVER);this.dispatchEvent(t),this.moveLocElementNum=0}},t}(egret.EventDispatcher);__reflect(ElementViewManage.prototype,"ElementViewManage");var GameOverPanel=function(e){function t(){var t=e.call(this)||this;return t._isSuccess=!1,t}return __extends(t,e),t.prototype.show=function(e){this._isSuccess=e,this._view=new egret.Bitmap,this._view.texture=RES.getRes("level_0002_background_png"),this._view.width=GameData.stageW,this._view.height=GameData.stageH,this.addChild(this._view),this.scaleX=.1,this.scaleY=.1,egret.Tween.get(this).to({scaleX:1,scaleY:1},700,egret.Ease.bounceOut).call(this.playStarAni,this),this.playStarAni()},t.prototype.initBtn=function(){this._btn=new egret.Shape,this._btn.graphics.lineStyle(1,6710886,1),this._btn.graphics.beginFill(16777215),this._btn.graphics.drawRect(0,0,80,40),this._btn.graphics.endFill(),this._btn.width=80,this._btn.height=40,this._btn.x=110,this._btn.y=140,this._btn.touchEnabled=!0,this.addChild(this._btn),this._btnLabel=new egret.TextField,this._btnLabel.size=20,this._btnLabel.textColor=3355443,this._btnLabel.text="确定",this._btnLabel.width=80,this._btnLabel.height=40,this._btnLabel.bold=!0,this._btnLabel.x=this._btn.x,this._btnLabel.y=this._btn.y,this._btnLabel.textAlign="center",this._btnLabel.verticalAlign="middle",this.addChild(this._btnLabel)},t.prototype.playStarAni=function(){if(console.log("播放动画"),console.log(this._isSuccess),this._isSuccess){var e=new egret.Bitmap;e.texture=RES.getRes("success_png"),e.width=(this._view.width-50)/3,e.height=e.width,e.x=(GameData.stageW-2*e.width)/3+this._view.x,e.y=150+this._view.y,e.scaleX=1.5,e.scaleY=1.5,e.alpha=0,this.addChild(e),egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},700,egret.Ease.circIn)}else{var t=new egret.Bitmap;t.texture=RES.getRes("fail_png"),t.width=(this._view.width-50)/3,t.height=t.width,t.x=(GameData.stageW-2*t.width)/3+this._view.x,t.y=150+this._view.y,t.scaleX=1.5,t.scaleY=1.5,t.alpha=0,this.addChild(t),egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},700,egret.Ease.circIn)}},t}(egret.Sprite);__reflect(GameOverPanel.prototype,"GameOverPanel");var LevelElementView=function(e){function t(){var t=e.call(this)||this;return t.eltype="",t.init(),t}return __extends(t,e),Object.defineProperty(t.prototype,"num",{get:function(){return Number(this.bittext.text)},set:function(e){0>=e?this.checkmarkbit||(this.checkmarkbit=new egret.Bitmap,this.checkmarkbit.texture=RES.getRes("checkmark_png"),this.checkmarkbit.x=(this.bitmap.width-this.checkmarkbit.width)/2,this.checkmarkbit.y=this.bitmap.height+this.bitmap.y-this.checkmarkbit.height/2,this.addChild(this.checkmarkbit),this.removeChild(this.bittext)):this.bittext.text=e.toString()},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.touchChildren=!1,this.bitmap||(this.bitmap=new egret.Bitmap);var e=(GameData.stageW-40)/GameData.MaxColumn;this.bitmap.width=e,this.bitmap.height=e,this.addChild(this.bitmap),this.bittext=new egret.BitmapText,this.bittext.font=RES.getRes("number_fnt"),this.bittext.text="0",this.bittext.x=(e-this.bittext.width)/2,this.bittext.y=this.bitmap.height+this.bitmap.y-this.bittext.height/2,this.addChild(this.bittext)},t.prototype.setTexture=function(e){this.bitmap.texture=RES.getRes(e)},t}(egret.Sprite);__reflect(LevelElementView.prototype,"LevelElementView");var LevelReqViewManage=function(){function e(e){this._layer=e,this.init()}return e.prototype.init=function(){this.elements=new Array},e.prototype.haveReqType=function(e){for(var t=this.elements.length,a=0;t>a;a++)if(this.elements[a].eltype==e)return!0;return!1},e.prototype.getPointByType=function(e){for(var t=new egret.Point,a=this.elements.length,i=0;a>i;i++)this.elements[i].eltype==e&&(t.x=this.elements[i].x+this.elements[i].width/2,t.y=this.elements[i].y+this.elements[i].height/2);return t},e.prototype.update=function(){console.log("更新关卡数量数据");for(var e=GameData.levelReq.getLevelReqNum(),t=0;e>t;t++)this.elements[t].num=GameData.levelReq.reqElements[t].num},e}();__reflect(LevelReqViewManage.prototype,"LevelReqViewManage");var PropView=function(e){function t(t){var a=e.call(this)||this;return a._type=-1,a.id=-1,a._type=t,a.init(),a}return __extends(t,e),Object.defineProperty(t.prototype,"proptype",{get:function(){return this._type},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.createView(),this.addChild(this._view_active),this.setFocus(!0)},t.prototype.createView=function(){this.touchEnabled=!0;var e=15,t=((GameData.stageW-6*e)/5,(GameData.stageW-40)/GameData.MaxRow);if(!this._view_active)switch(this._view_active=new egret.Bitmap,this._view_active.texture=RES.getRes(this.getActivateTexture(this._type)),this._type){case 0:this._view_active.width=t,this._view_active.height=t,this._view_active.x=20,this._view_active.y=GameData.stageH-this._view_active.height-10;break;case 1:this._view_active.x=20+this._view_active.width/2-5,this._view_active.y=GameData.stageH-this._view_active.height-t-30,this._view_active.width=.6*t,this._view_active.height=.6*t;break;case 2:this._view_active.x=GameData.stageW/2-this._view_active.width/2,this._view_active.y=GameData.stageH-1.575*t,this._view_active.width=1.575*t,this._view_active.height=1.575*t;break;case 3:this._view_active.x=GameData.stageW-20-this._view_active.width,this._view_active.y=GameData.stageH-this._view_active.height-10,this._view_active.width=.93*t,this._view_active.height=.966*t;break;case 4:this._view_active.width=.6*t,this._view_active.height=.708*t,this._view_active.x=GameData.stageW-10-3*this._view_active.width/2,this._view_active.y=GameData.stageH-this._view_active.height-1.21*t}console.log(this._view_active.x),console.log(this._view_active.y)},t.prototype.getActivateTexture=function(e){var t="";switch(e){case 0:t="ui_ranking_png";break;case 1:t="ui_sound_open_png";break;case 2:t="ui_bigbox_hit_png";break;case 3:t="ui_shop_png";break;case 4:t="ui_recycle_png"}return t},t.prototype.setFocus=function(e){e?this._view_active.texture=RES.getRes(this.getActivateTexture(this._type)):1==this._type&&(this._view_active.texture=RES.getRes("ui_sound_close_png"))},t}(egret.Sprite);__reflect(PropView.prototype,"PropView");var PropViewManage=function(){function e(e){this._currentID=-1,this._voice=!0,this._layer=e,this.init()}return e.prototype.init=function(){this._props=new Array,this.createData()},e.prototype.createData=function(){for(var e=0;5>e;e++){var t=new PropView(e);this._layer.addChild(t),this._props.push(t),t.id=e,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)}},e.prototype.createRank=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_ranking_png"),t.width=e,t.height=e,t.x=20,t.y=GameData.stageH-t.height-10,this._layer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.createVoice=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_sound_open_png"),t.width=.6*e,t.height=.6*e,t.x=20+t.width/2-5,t.y=GameData.stageH-t.height-e-30,this._layer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.createBox=function(){console.log("添加底部箱子：");var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_bigbox_hit_png"),t.width=1.575*e,t.height=1.575*e,t.x=GameData.stageW/2-t.width/2,t.y=GameData.stageH-t.height,console.log(GameData.stageW),console.log(t.width),console.log(t.x),this._layer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.createShop=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_shop_png"),t.width=.93*e,t.height=.966*e,t.x=GameData.stageW-20-t.width,t.y=GameData.stageH-t.height-10,this._layer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.createRecycle=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_recycle_png"),t.width=.6*e,t.height=.708*e,t.x=GameData.stageW-10-3*t.width/2,t.y=GameData.stageH-t.height-1.21*e,this._layer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.createTimerBg=function(){var e=(GameData.stageW-40)/GameData.MaxRow,t=new egret.Bitmap;t.texture=RES.getRes("ui_time_base_png"),t.width=e/3,t.height=e/3,t.x=345,t.y=GameData.stageH-110-20,this._layer.addChild(t)},e.prototype.click=function(t){this._currentID=t.currentTarget.id,1==this._voice&&1==this._currentID?(this._voice=!1,this._props[1].setFocus(!1)):(this._voice=!0,this._props[1].setFocus(!0)),e.propType=this._props[this._currentID].proptype;var a=new PropLogic;a.useProp(e.propType)},e.propType=-1,e}();__reflect(PropViewManage.prototype,"PropViewManage");